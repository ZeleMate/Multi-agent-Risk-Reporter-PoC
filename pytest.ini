[tool:pytest]
# Pytest configuration for the multi-agent risk reporter project

# Test discovery
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Output configuration
addopts =
    --verbose
    --tb=short
    --strict-markers
    --disable-warnings
    --color=yes

# Markers for test categorization
markers =
    unit: Unit tests for individual components
    integration: Integration tests for component interaction
    slow: Slow-running tests (mark with @pytest.mark.slow)
    config: Tests related to configuration management
    ingestion: Tests related to data ingestion
    retrieval: Tests related to vector store and retrieval
    agents: Tests related to AI agents
    pipeline: Tests for the complete pipeline

# Coverage configuration
# Note: coverage configuration can be added here when needed
# addopts = --cov=src --cov-report=html --cov-report=term-missing

# Test data and fixtures
cache_dir = .pytest_cache
tmp_path_retention_count = 3
tmp_path_retention_policy = failed

# Parallel execution (optional, uncomment if needed)
# addopts = -n auto

# Environment variables for tests
env =
    OPENAI_API_KEY=test-key
    DEBUG_LOGS=false
    DATA_RAW=./test_data/raw
    DATA_CLEAN=./test_data/clean
    VECTORSTORE_DIR=./test_vectorstore
    REPORT_DIR=./test_reports

# Filter warnings
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::UserWarning
    ignore::FutureWarning

# Minimum Python version requirement
minversion = 3.11
